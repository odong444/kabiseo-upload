{% extends "base.html" %}
{% block title %}{{ title }} - {{ depositor }} - ì¹´ë¹„ì„œ{% endblock %}

{% block content %}
<h1>{{ title }}</h1>

{% if items %}
<p class="subtitle">'{{ depositor }}' ë‹˜ì˜ ì œì¶œ ëŒ€ìƒ ({{ items|length }}ê±´)</p>

<div class="item-list">
    {% for item in items %}
    <div class="item-card">
        <div class="item-info">
            <div class="item-product">{{ item.get('ì œí’ˆëª…', '') }}</div>
            <div class="item-detail">ì•„ì´ë””: {{ item.get('ì•„ì´ë””', '') }}</div>
            <div class="item-detail">êµ¬ë§¤ì¼: {{ item.get('êµ¬ë§¤ì¼', '') }}</div>
            <div class="item-detail">ìƒíƒœ: {{ item.get('ìƒíƒœ', '') }}</div>
        </div>
        <form
            action="{{ url_for(capture_type + '_upload', row=item['_row_idx']) }}"
            method="POST"
            enctype="multipart/form-data"
            class="upload-form"
        >
            <label class="file-label">
                <input
                    type="file"
                    name="capture"
                    accept="image/*"
                    capture="environment"
                    required
                    class="file-input"
                    onchange="this.closest('form').querySelector('.file-name').textContent = this.files[0]?.name || ''; this.closest('form').querySelector('.submit-btn').disabled = false;"
                >
                <span class="file-btn">ğŸ“¸ ì‚¬ì§„ ì„ íƒ</span>
                <span class="file-name"></span>
            </label>
            <button type="submit" class="btn btn-primary submit-btn" disabled>ì œì¶œ</button>
        </form>
    </div>
    {% endfor %}
</div>

{% else %}
<div class="empty-state">
    <p>'{{ depositor }}' ë‹˜ ì•ìœ¼ë¡œ ì œì¶œí•  í•­ëª©ì´ ì—†ì–´ìš”.</p>
    <p>ì˜ˆê¸ˆì£¼ëª…ì„ ë‹¤ì‹œ í™•ì¸í•´ì£¼ì„¸ìš”.</p>
</div>
{% endif %}

<a href="{{ url_for(capture_type) }}" class="back-link">â† ë‹¤ì‹œ ê²€ìƒ‰</a>
{% endblock %}
